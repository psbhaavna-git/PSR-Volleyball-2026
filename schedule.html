<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Schedule â€” PSR Power League 2026</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Segoe UI',sans-serif;background:linear-gradient(135deg,#667eea,#764ba2);min-height:100vh;padding:20px}
.container{max-width:1100px;margin:0 auto;background:#fff;border-radius:15px;box-shadow:0 20px 60px rgba(0,0,0,.3);overflow:hidden}
.header{background:linear-gradient(135deg,#1e3c72,#2a5298);color:#fff;padding:28px;text-align:center}
.header h1{font-size:2em;margin-bottom:6px}
.nav{background:#f8f9fa;padding:12px 24px;border-bottom:2px solid #e9ecef;display:flex;gap:16px;flex-wrap:wrap}
.nav a{color:#667eea;text-decoration:none;font-weight:600;padding:7px 14px;border-radius:6px;transition:.2s}
.nav a:hover,.nav a.active{background:#667eea;color:#fff}
.status-bar{background:#e8f5e9;padding:10px 24px;border-bottom:2px solid #c8e6c9;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:8px;font-size:.9em}
.live-badge{background:#28a745;color:#fff;padding:4px 14px;border-radius:20px;font-weight:700;animation:blink 2s infinite}
@keyframes blink{0%,100%{opacity:1}50%{opacity:.6}}
.controls{background:#f0f2ff;padding:16px 24px;border-bottom:2px solid #dde2ff;display:flex;gap:16px;flex-wrap:wrap;align-items:flex-end}
.ctrl{display:flex;flex-direction:column;gap:6px;min-width:160px}
.ctrl label{font-weight:700;font-size:.85em;color:#1e3c72;text-transform:uppercase}
.ctrl select{padding:10px 14px;border:2px solid #e9ecef;border-radius:8px;font-size:.95em;background:#fff}
.ctrl select:focus{border-color:#667eea;outline:none}
.events{padding:24px}
.pl-section{margin-bottom:36px}
.pl-header{background:linear-gradient(90deg,#1e3c72,#2a5298);color:#fff;padding:14px 20px;border-radius:10px 10px 0 0;display:flex;justify-content:space-between;align-items:center}
.pl-header h2{font-size:1.1em;font-weight:700}
.pl-status{padding:4px 14px;border-radius:12px;font-size:.8em;font-weight:700}
.pl-status.past{background:#6c757d}
.pl-status.today{background:#dc3545;animation:blink 1.5s infinite}
.pl-status.upcoming{background:#28a745}
.event-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:0;border:2px solid #e9ecef;border-top:none;border-radius:0 0 10px 10px;overflow:hidden}
.event-card{padding:16px 20px;border-right:1px solid #e9ecef;border-bottom:1px solid #e9ecef;transition:background .2s}
.event-card:hover{background:#f0f2ff}
.event-card.today-card{background:#fff8e1;border-left:4px solid #ff9800}
.event-card.past-card{opacity:.75}
.div-name{font-weight:700;font-size:1em;color:#1e3c72;margin-bottom:4px}
.event-date{color:#667eea;font-size:.85em;font-weight:600;margin-bottom:6px}
.event-meta{font-size:.82em;color:#6c757d;line-height:1.6}
.event-meta strong{color:#333}
.today-badge{display:inline-block;background:#ff9800;color:#fff;padding:2px 10px;border-radius:10px;font-size:.75em;font-weight:700;margin-bottom:6px}
.info-box{background:#e3f2fd;border-left:4px solid #2196f3;padding:14px 20px;margin:0 24px 24px;border-radius:0 8px 8px 0;font-size:.9em;line-height:1.7;color:#1a237e}
.footer{background:#f8f9fa;padding:18px 24px;text-align:center;border-top:2px solid #e9ecef;font-size:.85em;color:#6c757d}
.footer a{color:#667eea;font-weight:600;text-decoration:none}
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <h1>ğŸ“… 2026 Power League Schedule</h1>
    <p>PSR Volleyball â€” All Divisions</p>
  </div>

  <div class="nav">
    <a href="index.html">ğŸ“Š Standings</a>
    <a href="schedule.html" class="active">ğŸ“… Schedule</a>
    <a href="results.html">ğŸ¯ Live Results</a>
    <a href="brackets.html">ğŸ† Brackets</a>
  </div>

  <div class="status-bar">
    <div>Last update: <strong id="lastUpdate">â€”</strong></div>
    <div class="live-badge">ğŸ”„ Auto-refresh every 30s</div>
    <div>Countdown: <strong id="countdown">30</strong>s</div>
  </div>

  <div class="controls">
    <div class="ctrl">
      <label>Division</label>
      <select id="divSel" onchange="render()">
        <option value="ALL">All Divisions</option>
        <option value="U12" selected>U12</option>
        <option value="U13">U13</option>
        <option value="U14">U14</option>
        <option value="U15">U15</option>
        <option value="U16">U16</option>
        <option value="U18">U18</option>
      </select>
    </div>
    <div class="ctrl">
      <label>Show</label>
      <select id="showSel" onchange="render()">
        <option value="ALL">All Events</option>
        <option value="upcoming">Upcoming Only</option>
        <option value="past">Past Only</option>
      </select>
    </div>
  </div>

  <div class="info-box" id="infoBox"></div>
  <div class="events" id="eventsContainer"></div>

  <div class="footer">
    Official schedule at <a href="https://www.psrvb.org/power-league" target="_blank">PSR Volleyball</a>
  </div>
</div>

<script>
const TODAY = new Date('2026-02-09');

const SCHEDULE = [
  {
    id:'seeding',
    name:'Seeding Tournament',
    date:'2026-01-03',
    location:'Various Gyms â€“ PSR Region',
    divisions:['U12','U13','U14','U15','U16','U18'],
    notes:'Required for all PL teams. Determines initial flight placement.',
    gates:'$8 adults / $5 students',
    roster:'Must submit final roster by Dec 27'
  },
  {
    id:'pl1',
    name:'Power League #1',
    date:'2026-01-24',
    location:'Various Gyms â€“ PSR Region',
    divisions:['U12','U13','U14','U15','U16','U18'],
    notes:'First play date. Standings posted Tuesday Jan 26.',
    gates:'$10 adults / $6 students',
    roster:'Rosters locked 48hrs before play date'
  },
  {
    id:'pl2',
    name:'Power League #2',
    date:'2026-02-08',
    location:'Various Gyms â€“ PSR Region',
    divisions:['U12','U13','U14','U15','U16','U18'],
    notes:'TODAY â€” Live matches in progress. Results posted by end of day.',
    gates:'$10 adults / $6 students',
    roster:'Rosters locked 48hrs before play date'
  },
  {
    id:'pl3',
    name:'Power League #3',
    date:'2026-03-01',
    location:'Various Gyms â€“ PSR Region',
    divisions:['U12','U13','U14','U15','U16','U18'],
    notes:'Final regular season play date. Standings finalized March 3.',
    gates:'$10 adults / $6 students',
    roster:'Rosters locked 48hrs before play date'
  },
  {
    id:'pl4',
    name:'Power League #4',
    date:'2026-03-29',
    location:'Various Gyms â€“ PSR Region',
    divisions:['U14','U15','U16','U18'],
    notes:'U14â€“U18 only. Points accumulate toward qualifier ranking.',
    gates:'$10 adults / $6 students',
    roster:'Rosters locked 48hrs before play date'
  },
  {
    id:'qualifier',
    name:'PSR Qualifier / Championship',
    date:'2026-04-19',
    location:'TBA â€“ Large Multi-Gym Venue',
    divisions:['U12','U13','U14','U15','U16','U18'],
    notes:'Season championship. Top teams from final standings qualify. Teams notified by April 5.',
    gates:'$12 adults / $8 students',
    roster:'Final rosters due April 12'
  },
];

function getStatus(dateStr) {
  const d = new Date(dateStr);
  if (d.toDateString() === TODAY.toDateString()) return 'today';
  if (d < TODAY) return 'past';
  return 'upcoming';
}

function render() {
  const divFilter  = document.getElementById('divSel').value;
  const showFilter = document.getElementById('showSel').value;

  const filtered = SCHEDULE.filter(ev => {
    if (divFilter !== 'ALL' && !ev.divisions.includes(divFilter)) return false;
    const st = getStatus(ev.date);
    if (showFilter === 'upcoming' && st === 'past') return false;
    if (showFilter === 'past' && st !== 'past') return false;
    return true;
  });

  // Update info box
  const todayEv = SCHEDULE.find(e => getStatus(e.date) === 'today');
  const infoEl  = document.getElementById('infoBox');
  if (todayEv) {
    infoEl.innerHTML = `<strong>ğŸ”´ LIVE TODAY:</strong> ${todayEv.name} is happening now! Check <a href="results.html">Live Results</a> and <a href="brackets.html">Brackets</a> for real-time updates.`;
  } else {
    const next = SCHEDULE.find(e => getStatus(e.date) === 'upcoming');
    if (next) {
      const d = new Date(next.date);
      const diff = Math.ceil((d - TODAY) / (1000*60*60*24));
      infoEl.innerHTML = `<strong>ğŸ“‹ Next Event:</strong> ${next.name} on ${d.toLocaleDateString('en-US',{weekday:'long',month:'long',day:'numeric'})} â€” <strong>${diff} days away</strong>. Entry: ${next.gates}.`;
    } else {
      infoEl.innerHTML = `<strong>ğŸ Season Complete.</strong> Thank you for a great 2026 Power League season!`;
    }
  }

  if (filtered.length === 0) {
    document.getElementById('eventsContainer').innerHTML = `<div style="text-align:center;padding:40px;color:#888"><h3>No events match your filter.</h3></div>`;
    return;
  }

  // Group by PL
  let html = '';
  filtered.forEach(ev => {
    const st = getStatus(ev.date);
    const d  = new Date(ev.date);
    const dateStr = d.toLocaleDateString('en-US',{weekday:'long',month:'long',day:'numeric',year:'numeric'});
    const statusLabel = st==='today'?'ğŸ”´ TODAY':st==='past'?'âœ… Completed':'ğŸ—“ Upcoming';
    const statusCls   = st;

    html += `<div class="pl-section">
      <div class="pl-header">
        <h2>ğŸ“… ${ev.name}</h2>
        <span class="pl-status ${statusCls}">${statusLabel}</span>
      </div>
      <div class="event-grid">`;

    ev.divisions.filter(dv => divFilter==='ALL' || dv===divFilter).forEach(dv => {
      html += `<div class="event-card${st==='today'?' today-card':st==='past'?' past-card':''}">
        ${st==='today' ? '<span class="today-badge">âš¡ LIVE NOW</span>' : ''}
        <div class="div-name">${dv} Division</div>
        <div class="event-date">ğŸ“… ${dateStr}</div>
        <div class="event-meta">
          ğŸ“ <strong>${ev.location}</strong><br>
          ğŸŸ <strong>Gate:</strong> ${ev.gates}<br>
          ğŸ“‹ <strong>Roster:</strong> ${ev.roster}<br>
          ğŸ’¬ ${ev.notes}
        </div>
      </div>`;
    });

    html += `</div></div>`;
  });

  document.getElementById('eventsContainer').innerHTML = html;
  document.getElementById('lastUpdate').textContent =
    new Date().toLocaleTimeString('en-US',{hour:'2-digit',minute:'2-digit',second:'2-digit'});
}

// Countdown + auto-refresh every 30s
let secs = 30;
function tick() {
  secs--;
  document.getElementById('countdown').textContent = secs;
  if (secs <= 0) { secs = 30; render(); }
}
render();
setInterval(tick, 1000);
</script>
</body>
</html>
